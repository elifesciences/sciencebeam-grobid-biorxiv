FROM elifesciences/sciencebeam-trainer-delft-grobid:0.0.14

ENV GROBID_MODELS_DIRECTORY=/opt/grobid/grobid-home/models
ENV GROBID__CRF__ENGINE=wapiti
ENV GROBID__HEADER__USE_HEURISTICS=false
ENV GROBID__FEATURES__REMOVE_LINE_NUMBERS=false
ENV GROBID__3RDPARTY__PDF2XML__MEMORY__TIMEOUT__SEC=300
ENV GROBID__PDF__BLOCKS__MAX=1000000
ENV GROBID__PDF__TOKENS__MAX=10000000

HEALTHCHECK --interval=10s --timeout=10s \
  CMD curl --fail http://localhost:8070 || exit 1
